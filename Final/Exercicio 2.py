equipas = ['Chelsea','Manchester United','Manchester City']
#Apenas incluimos 3 jogadores, um para cada equipa mas podem ser acrescentados mais desde que seja indicada corretamente a equipa os numeros de 0 a 3 correspondentes � posicao da equipa na lista acima
jogadores = {
    0 : {
        'Nome': [
            'Kepa Arrizabalaga'
        ],
        'Numero': (
            1
        ),
        'Equipa': (
            0
        ),
        'Votos': 0
    },
    1:{
        'Nome': [
            'Willy Caballero'
        ],
        'Numero': (
            2
        ),
        'Equipa': (
            0
        ),
        'Votos': 0   
    },
    2:{
        'Nome': [
            'Antonio Rudiger'
        ],
        'Numero': (
            3
        ),
        'Equipa': (
            0
        ),
        'Votos': 0
    },
    3:{
        'Nome': [
            'Marcos Alonso'
        ],
        'Numero': (
            4
        ),
        'Equipa': (
            0
        ),                                             
        'Votos': 0   
    },
    4:{
        'Nome': [
            'Davide Zappacosta' 
        ],
        'Numero': (
            5
        ),
        'Equipa': (
            0
        ),
        'Votos': 0      
    },
    5:{
        'Nome': [
            'Gary Cahill'
        ],
        'Numero': (
            6
        ),
        'Equipa': (
            0
        ),
        'Votos': 0 
    },
    6:{
       'Nome': [
            'Andreas Christensen'  
        ],
        'Numero': (
            7
        ),
        'Equipa': (
            0
        ),
        'Votos': 0    
    },
    7:{
        'Nome': [
            'C�sar Azpilicueta' 
        ],
        'Numero': (
            8
        ),
        'Equipa': (
            0
        ),
        'Votos': 0       
    },
    8:{
        'Nome': [
            'David Luiz'
        ],
        'Numero': (
            9
        ),
        'Equipa': (
            0
        ),
        'Votos': 0      
    },
    9:{
      'Nome': [
            'Cesc F�bregas'            
        ],
        'Numero': (
            10
        ),
        'Equipa': (
            0
        ),
        'Votos': 0      
    },
    10:{
       'Nome': [
            'Jorginho'            
        ],
        'Numero': (
            11
        ),
        'Equipa': (
            0
        ),
        'Votos': 0      
    },
    11:{
        'Nome': [
            'Danny Drinkwater'            
        ],
        'Numero': (
            12
        ),
        'Equipa': (
            0
        ),
        'Votos': 0     
    },
    12:{
       'Nome': [
            'Ross Barkley'            
        ],
        'Numero': (
            13
        ),
        'Equipa': (
            0
        ),
        'Votos': 0       
    },
    13:{
        'Nome': [
            'Loftus-Cheek'            
        ],
        'Numero': (
            14
        ),
        'Equipa': (
            0
        ),
        'Votos': 0      
    },
    14:{
        'Nome': [
            'N�Golo Kant�'            
        ],
        'Numero': (
            15
        ),
        'Equipa': (
            0
        ),
        'Votos': 0       
    },
    15:{
         'Nome': [
            'Mateo Kovacic'
        ],
        'Numero': (
            16
        ),
        'Equipa': (
            0
        ),
        'Votos': 0     
    },
    16:{
        'Nome': [
            'Eden Hazard' 
            
        ],
        'Numero': (
            17
        ),
        'Equipa': (
            0
        ),
        'Votos': 0    
    },
    17:{
        'Nome': [
            'Pedro Rodr�guez' 
        ],
           
        'Numero': (
            18
        ),
        'Equipa': (
            0
        ),
        'Votos': 0      
    },
    18:{
        'Nome': [
            'Victor Moses' 
        ], 
            
        'Numero': (
            19
        ),
        'Equipa': (
            0
        ),
        'Votos': 0      
    },
    19:{
       'Nome': [             
            'Willian'             
        ],
        'Numero': (
            20
        ),
        'Equipa': (
            0
        ),
        'Votos': 0     
    },
    20:{
        'Nome': [
            'Olivier Giroud' 
        ],
        'Numero': (
            21
        ),
        'Equipa': (
            0
        ),
        'Votos': 0    
    },
    21:{
       'Nome': [
            'Hudson-Odoi'
        ],
        'Numero': (
            22
        ),
        'Equipa': (
            0
        ),
        'Votos': 0      
    },
    22:{
         'Nome': [
            '�lvaro Morata'
        ],
        'Numero': (
            23
        ),
        'Equipa': (
            0
        ),
        'Votos': 0        
    },   
    23:{
        'Nome': [
            'Alisson Becker'
        ],
        'Numero': (
            1
        ),
        'Equipa': (
            1
        ),
        'Votos': 0   
    },   
    24:{
        'Nome': [
            'Simon Mignolet'
        ],
        'Numero': (
            2
        ),
        'Equipa': (
            1
        ),
        'Votos': 0   
    },    
    25:{
       'Nome': [
            'Nathaniel Clyne'
             
        ],
        'Numero': (
            3
        ),
        'Equipa': (
            1
        ),
        'Votos': 0
    },    
    26:{
        'Nome': [
            'Virgil van Dijk'
             
        ],
        'Numero': (
            4
        ),
        'Equipa': (
            1
        ),                                             
        'Votos': 0    
    },    
    27:{
        'Nome': [
            'Dejan Lovren'
             
        ],
        'Numero': (
            5
        ),
        'Equipa': (
            1
        ),
        'Votos': 0   
    },    
    28:{
        'Nome': [
            'Joe G�mez'
             
        ],
        'Numero': (
            6
        ),
        'Equipa': (
            1
        ),
        'Votos': 0      
    },    
    29:{
        'Nome': [
             'Alberto Moreno'
             
        ],
        'Numero': (
            7
        ),
        'Equipa': (
            1
        ),
        'Votos': 0    
    },    
    30:{
        'Nome': [
            'Andy Robertson'
             
        ],
        'Numero': (
            8
        ),
        'Equipa': (
            1
        ),
        'Votos': 0  
    },    
    31:{
        'Nome': [
            'Joel Matip'
             
        ],
        'Numero': (
            9
        ),
        'Equipa': (
            1
        ),
        'Votos': 0
    },    
    32:{
        'Nome': [
            'Alexander-Arnold'          
        ],
        'Numero': (
            10
        ),
        'Equipa': (
            1
        ),
        'Votos': 0      
    },    
    33:{
        'Nome': [
            'Fabinho'
                  
        ],
        'Numero': (
            11
        ),
        'Equipa': (
            1
        ),
        'Votos': 0    
    },    
    34:{
        'Nome': [
            'Gini Wijnaldum'
                       
        ],
        'Numero': (
            12
        ),
        'Equipa': (
            1
        ),
        'Votos': 0     
    },    
    35:{
        'Nome': [
            'James Milner'
                     
        ],
        'Numero': (
            13
        ),
        'Equipa': (
            1
        ),
        'Votos': 0    
    },    
    36:{
        'Nome': [
            'Naby Keita'
                      
        ],
        'Numero': (
            14
        ),
        'Equipa': (
            1
        ),
        'Votos': 0
    },    
    37:{
        'Nome': [
            'Jordan Henderson'
                           
        ],
        'Numero': (
            15
        ),
        'Equipa': (
            1
        ),
        'Votos': 0
    },    
    38:{
        'Nome': [
            'Adam Lallana'
        ],
        'Numero': (
            16
        ),
        'Equipa': (
            1
        ),
        'Votos': 0    
    },    
    39:{
        'Nome': [
            'Oxlade-Chamberlain'  
        ],
        'Numero': (
            17
        ),
        'Equipa': (
            1
        ),
        'Votos': 0   
    },    
    40:{
        'Nome': [
            'Roberto Firmino'
             
        ],
           
        'Numero': (
            18
        ),
        'Equipa': (
            1
        ),
        'Votos': 0    
    },    
    41:{
        'Nome': [
            'Victor Moses' 
        ], 
            
        'Numero': (
            19
        ),
        'Equipa': (
            1
        ),
        'Votos': 0  
    },    
    42:{
        'Nome': [             
            'Sadio Man�'
                        
        ],
        'Numero': (
            20
        ),
        'Equipa': (
            1
        ),
        'Votos': 0   
    },    
    43:{
        'Nome': [
            'Mohamed Salah'
             
        ],
        'Numero': (
            21
        ),
        'Equipa': (
            1
        ),
        'Votos': 0 
    },    
    44:{
        'Nome': [
            'Xherdan Shaqiri'
        ],
        'Numero': (
            23
        ),
        'Equipa': (
            1
        ),
        'Votos': 0    
    },    
    45:{
        'Nome': [
            'Claudio Bravo'            
        ],
        'Numero': (
            1
        ),
        'Equipa': (
            2
        ),
        'Votos': 0
    },    
    46:{
        'Nome': [
            'Ederson Moraes'
        ],
        'Numero': (
            2
        ),
        'Equipa': (
            2
        ),
        'Votos': 0
    },    
    47:{
        'Nome': [
            'Kyle Walker'
        ],
        'Numero': (
            3
        ),
        'Equipa': (
            2
        ),
        'Votos': 0  
    },    
    48:{
        'Nome': [
            'Danilo'
        ],
        'Numero': (
            4
        ),
        'Equipa': (
            2
        ),                                             
        'Votos': 0 
    },  
    49:{
        'Nome': [
            'Vincent Kompany'
        ],
        'Numero': (
            5
        ),
        'Equipa': (
            2
        ),
        'Votos': 0
    },     
    50:{
        'Nome': [
            'John Stones'
        ],
        'Numero': (
            6
        ),
        'Equipa': (
            2
        ),
        'Votos': 0
    },     
    51:{
        'Nome': [
             'Eliaquim Mangala'

        ],
        'Numero': (
            7
        ),
        'Equipa': (
            2
        ),
        'Votos': 0
    },        
    52:{
        'Nome': [
            'Aymeric Laporte'

        ],
        'Numero': (
            8
        ),
        'Equipa': (
            2
        ),
        'Votos': 0
    },        
    53:{
        'Nome': [
            'Fabian Delph'
        ],
        'Numero': (
            9
        ),
        'Equipa': (
            0
        ),
        'Votos': 0
    },        
    54:{
        'Nome': [
            'Benjamin Mendy'        
        ],
        'Numero': (
            10
        ),
        'Equipa': (
            2
        ),
        'Votos': 0
    },        
    55:{
        'Nome': [
            'Nicol�s Otamendi'  
        ],
        'Numero': (
            11
        ),
        'Equipa': (
            2
        ),
        'Votos': 0
    },        
    56:{
        'Nome': [
            'Oleks Zinchenko'             
        ],
        'Numero': (
            12
        ),
        'Equipa': (
            2
        ),
        'Votos': 0
    },        
    57:{
        'Nome': [
            'Ilkay Gundogan'
        ],
        'Numero': (
            13
        ),
        'Equipa': (
            2
        ),
        'Votos': 0
    },        
    58:{
        'Nome': [
            'Kevin De Bruyne'
        ],
        'Numero': (
            14
        ),
        'Equipa': (
            2
        ),
        'Votos': 0
    },        
    59:{
        'Nome': [
            'Bernardo Silva'        
        ],
        'Numero': (
            15
        ),
        'Equipa': (
            2
        ),
        'Votos': 0
    },        
    60:{
          'Nome': [
            'David Silva' 
        ],
        'Numero': (
            16
        ),
        'Equipa': (
            2
        ),
        'Votos': 0
    }, 
    61:{
        'Nome': [
            'Fernandinho'
        ],
        'Numero': (
            17
        ),
        'Equipa': (
            2
        ),
        'Votos': 0
    },        
    62:{
        'Nome': [
            'Phil Foden'
        ],
           
        'Numero': (
            18
        ),
        'Equipa': (
            2
        ),
        'Votos': 0
    },        
    63:{
        'Nome': [
            'Felix Nmecha'
        ], 
            
        'Numero': (
            19
        ),
        'Equipa': (
            2
        ),
        'Votos': 0
    },        
    64:{
        'Nome': [             
            'Raheem Sterling'           
        ],
        'Numero': (
            20
        ),
        'Equipa': (
            2
        ),
        'Votos': 0
    },        
    65:{
        'Nome': [
            'Kun Ag�ero'
        ],
        'Numero': (
            21
        ),
        'Equipa': (
            2
        ),
        'Votos': 0
    },        
    66:{
        'Nome': [
            'Daniel Sturridge'
        ],
        'Numero': (
            22
        ),
        'Equipa': (
            2
        ),
        'Votos': 0
    },        
    67:{
        'Nome': [
            'Gabriel Jesus'
        ],
        'Numero': (
            23
        ),
        'Equipa': (
            2
        ),
        'Votos': 0  
    },        
                                        
}

#Funcao para verificar se o numero do jogador existe e se � valido
def verifica_numero(jogador,dic):
    if jogador > 23:
        print ("Numero invalido! Apenas entre 1 e 23")
        return 1
    else:
        for i in range(len(dic)):
            x = dic[i] ['Numero']
            if x == jogador:
                retornar = 3
                break
            else:
                retornar = 2
        return retornar

#Funcao para verificar a equipa
def verifica_equipa(equipa,dic,player):
    for i in range(len(dic)):
        x = dic[i] ['Equipa']
        y = dic[i] ['Numero']
        if x == equipa and y != player: #Se x for igual a equipa mas y nao for igual ao jogador quer dizer que a equipa existe mas o jogador nao pertence aquela equipa
            retornar = 1
        elif x == equipa and y == player: #Se x for igual a equipa e y igual ao jogador quer dizer que o jogador existe naquela equipa
            dic[i] ['Votos'] = dic[i] ['Votos'] + 1
            retornar = 2
            break
        else:
            retornar = 0
    return retornar

#Funcao para votar nos jogadores 
def votos(quantos,players):
    x = 0
    N_votos = 0
    retornar = 0
    while x < quantos:
        x = x + 1
        print (x,"� Voto!")
        jogador = int(input("Numero do jogador a votar-> "))
        if jogador == 0:
            break
        check_player = verifica_numero(jogador,players)
        while check_player == 1 or check_player == 2:
            if check_player == 2:
                print ("Numero nao encontrado!")
            jogador = int(input("Numero do jogador a votar-> "))
            check_player = verifica_numero(jogador,players)
            if jogador == 0:
                break         
        else:
            equipa = int(input("Equipa do jogador a votar-> "))
            check_team = verifica_equipa(equipa,players,jogador)
            while check_team == 0 or check_team == 1:
                print ("Erro na escolha da equipa!")
                equipa = int(input("Equipa do jogador a votar-> "))
                check_team = verifica_equipa(equipa,players,jogador)
    ficou = retornar
        
#Funcao para mostrar todos os jogadores com votos
def votados(players):
    quant = 0
    for i in range(len(players)):
        num = players[i] ['Votos']
        if num > 0:
            quant = quant + 1
            print ("\n")
            print ("Nome: ",players[i] ['Nome'] [0])
            print ("Numero: ",players[i] ['Numero'])
            print ("Votos: ", players[i] ['Votos'])
    if quant == 0:
        print ("Nenhum jogador com votos!")

#Funcao para saber o total de votos feito
def saber_quantos_votos(players):
    total = 0
    for i in range(len(players)):
        votos = players[i] ['Votos']
        total = total + votos
    return total

#Funcao para saber a percentagem de votos correspondente a cada jogador
def percentagem_votos(players):
    total = saber_quantos_votos(players)
    for i in range(len(players)):
        votos = players[i] ['Votos']
        percentagem = votos * 100 / total    
        print (players[i] ['Nome'] [0], "obteve", percentagem, "% dos votos!")

#Funcao para verificar quantos jogadores com o mesmo numero de votos existem
def verificar_quantos_iguais(players,mais_alto):    
    guardar = []
    for i in range(len(players)):
        votos = players[i] ['Votos']
        if votos == mais_alto:
            guardar.append(i)
    return guardar

#Funcao para saber qual o melhor jogador assumindo que o melhor � aquele que obteve mais votos
def o_melhor(players,teams):
    mostrar = 0
    melhor = players[0] ['Votos']
    for i in range(len(players)):
        num = players[i] ['Votos']
        if num > melhor:
            melhor = num
            mostrar = i
    mais_alto = players[mostrar] ['Votos']
    iguais = verificar_quantos_iguais(players,mais_alto)
    if len(iguais) > 1:
        print ("Empate entre", len(iguais), "jogadores: \n")
        for i in range(len(iguais)):
            nome = players[iguais[i]] ['Nome'] [0]
            numero = players[iguais[i]] ['Numero']
            equipa = teams[players[iguais[i]] ['Equipa']]
            print ("Um dos melhores foi: ", nome)
            print ("Numero: ", numero)
            print ("Equipa do jogador: ", equipa, "\n")
    else:
        print ("O Melhor jogador foi: ", players[mostrar] ['Nome'] [0] [0])
        print ("Numero do jogador: ", players[mostrar] ['Numero'])
        print ("Equipa do jogador: ", teams[players[mostrar] ['Equipa']])

#Ordenar o dicionario de acordo com o criterio de maior numero de t-shirt para o menor
def ordenar_por_numero_maior_menor(players):
    for i in range(len(players)-1, 0 , -1):
        for x in range(i):
            if players[x] ['Numero'] < players[x+1] ['Numero']:
                maior = players[x + 1]
                players[x + 1] = players[x]
                players[x] = maior      
    return players

#Ordenar o dicionario de acordo com o criterio de menor numero de t-shirt para o maior
def ordenar_por_numero_menor_maior(players):
    for i in range(len(players)-1, 0 , -1):
        for x in range(i):
            if players[x] ['Numero'] > players[x+1] ['Numero']:
                maior = players[x]
                players[x] = players[x + 1]
                players[x + 1] = maior 
    return players

#Ordenar dicionario de acordo com o numero de votos, aquele ou aqueles com mais votos v�m primeiro
def ordenar_por_votos(players):
    for i in range(len(players)-1, 0 , -1):
        for x in range(i):
            if players[x] ['Votos'] < players[x+1] ['Votos']:
                maior = players[x + 1]
                players[x + 1] = players[x]
                players[x] = maior      
    return players

#Mostrar o dicionario inteiro
def ver_dados(players):
    for i in range(len(players)):
        print (players[i])

#Escrever no ficheiro de resultados os jogadores com votos
def votados_ficheiro(players):
    ficheiro = open("Resultados.txt","a")
    ficheiro.write(
        "\n" +
        "Jogadores com votos: "
    )    
    for i in range(len(players)):
        num = players[i] ['Votos']
        if num > 0:
            nome = players[i] ['Nome'] [0]
            numero = players[i] ['Numero']
            votos = players[i] ['Votos']
            ficheiro.write (
                "\n" + 
                "Nome: " + str(nome) + "\n"
                "Numero: " + str(numero) + "\n"
                "Votos: " + str(votos) + "\n"                            
            )
    ficheiro.close()

#Escrever no ficheiro a percentagem de votos de cada jogador
def percentagem_votos_ficheiro(players):
    total = saber_quantos_votos(players)
    ficheiro = open("Resultados.txt","a")
    ficheiro.write(
        "\n" +
        "Percentagem de votos: "
    )    
    for i in range(len(players)):
        votos = players[i] ['Votos']
        percentagem = votos * 100 / total
        nome = players[i] ['Nome'] [0] 
        ficheiro.write (
            "\n" + str(nome) + " obteve " + str(percentagem) + "% dos votos!"                      
        )        
    ficheiro.close()

#Escrever o melhor ou melhores jogadores no ficheiro
def o_melhor_ficheiro(players,teams):
    total = saber_quantos_votos(players)
    ficheiro = open("Resultados.txt","a")    
    mostrar = 0 
    melhor = players[0] ['Votos']
    for i in range(len(players)):
        num = players[i] ['Votos']
        if num > melhor:
            melhor = num
            mostrar = i
    mais_alto = players[mostrar] ['Votos']
    iguais = verificar_quantos_iguais(players,mais_alto)
    if len(iguais) > 1:
        lenght = len(iguais)
        print (lenght)
        ficheiro.write(
            "\n \n" +
            "Empate entre " + str(lenght) + " jogadores: "
        )
        for i in range(len(iguais)):
            nome = players[iguais[i]] ['Nome'] [0]
            numero = players[iguais[i]] ['Numero']
            equipa = teams[players[iguais[i]] ['Equipa']]
            votos = players[iguais[i]] ['Votos']
            percentagem = votos * 100 / total 
            ficheiro.write (
                "\n" +
                "Um dos melhores jogadores foi: " + str(nome) + "\n"
                "Numero do jogador: " + str(numero) + "\n"
                "Equipa do jogador: " + str(equipa) + "\n"
                "Total de votos: " + str(votos) + "\n"
                "Percentagem de votos: " + str(percentagem) + "%\n"
            )
    else:
        nome = players[mostrar] ['Nome'] [0]
        numero = players[mostrar] ['Numero']
        equipa = teams[players[mostrar] ['Equipa']]
        votos = players[mostrar] ['Votos']
        percentagem = votos * 100 / total 
        ficheiro.write (
            "\n \n" +
            "O Melhor jogador foi: " + str(nome) + "\n"
            "Numero do jogador: " + str(numero) + "\n"
            "Equipa do jogador: " + str(equipa) + "\n"
            "Total de votos: " + str(votos) + "\n"
            "Percentagem de votos: " + str(percentagem) + "%\n"
        )
    ficheiro.close()

#Criar o ficheiro e chamar as respetivas fun��es para complementar o mesmo
def criar_ficheiro(players,teams):
    votos = saber_quantos_votos(players)
    ficheiro = open("Resultados.txt","w")
    ficheiro.write ("Foram feitos " + str(votos) + " votos!\n")
    ficheiro.close()
    votados_ficheiro(players)
    percentagem_votos_ficheiro(players)
    o_melhor_ficheiro(players,teams)
        
#Menu para interagir com o utilizador
resposta = True
while resposta:
    print ("""
    1.Iniciar votos
    2.Ver jogadores votados
    3.Ver percentagem de votos
    4.Ver o melhor com detalhes
    5.Ordernar jogadores por numero maior - menor
    6.Ordernar jogadores por numero menor - maior
    7.Ordenar por num de votos
    8.Ver dicionario de jogadores
    9.Criar ficheiro com resultados
    0.Sair
    """)
    resposta=raw_input("Escolha uma opcao: ")
    if resposta == "1":
        num_votos = int(input("Quantos votos serao feitos-> "))
        votos(num_votos,jogadores)
    elif resposta == "2":
        votados(jogadores)
    elif resposta == "3":
        if 'num_votos' not in globals():
            print ("Vote para ver a percentagem!")
        else:        
            percentagem_votos(jogadores)
    elif resposta == "4":
        if 'num_votos' not in globals():
            print ("Vote para ver o melhor!")
        else:        
            o_melhor(jogadores,equipas)
    elif resposta == "5":
        ordenar_por_numero_maior_menor(jogadores)
        for i in range(len(jogadores)):
            print (jogadores[i])        
    elif resposta == "6":
        ordenar_por_numero_menor_maior(jogadores)
        for i in range(len(jogadores)):
            print (jogadores[i])         
    elif resposta == "7":
        ordenar_por_votos(jogadores)
        for i in range(len(jogadores)):
            print (jogadores[i])        
    elif resposta == "8":
        ver_dados(jogadores)
    elif resposta == "9":
        if 'num_votos' not in globals():
            print ("Vote para escrever ficheiro!")
        else:
            criar_ficheiro(jogadores,equipas)     
    elif resposta == "0":
        resposta = None
    else:
        print ("\n Not Valid Choice Try again")